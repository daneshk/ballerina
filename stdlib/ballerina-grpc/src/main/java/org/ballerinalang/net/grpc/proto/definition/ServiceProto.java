// Generated by the protocol buffer compiler.  DO NOT EDIT!
// source: helloworld.proto

package org.ballerinalang.net.grpc.proto.definition;

import com.google.protobuf.DescriptorProtos;
import com.google.protobuf.Descriptors;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.List;

/**.
 * .
 */
public final class ServiceProto {

    private byte[] rootDescriptorData;
    private List<byte[]> dependentDescriptorData;
    private DescriptorProtos.FileDescriptorProto set;

    public ServiceProto(byte[] descriptorData, List<byte[]> depDescriptorData) {

        rootDescriptorData = descriptorData;
        dependentDescriptorData = depDescriptorData;
    }

    /**.
     * .
     * @return.
     */
    public Descriptors.FileDescriptor getDescriptor() {

        Descriptors.FileDescriptor[] depSet = new Descriptors.FileDescriptor[dependentDescriptorData.size()];
        int i = 0;
        for (byte[] dis : dependentDescriptorData) {
            InputStream in = new ByteArrayInputStream(dis);
            try {
                DescriptorProtos.FileDescriptorSet desSet = DescriptorProtos.FileDescriptorSet.parseFrom(in);
                depSet[i] = Descriptors.FileDescriptor.buildFrom((DescriptorProtos.FileDescriptorProto)
                        desSet.getFileOrBuilder(0), new Descriptors.FileDescriptor[]{});
                // todo: 2/20/18 for more levels
                i++;
            } catch (IOException | Descriptors.DescriptorValidationException e) {
                throw new RuntimeException(" Error ", e);
            }
        }

        InputStream targetStream = null;
        try {
            targetStream = new ByteArrayInputStream(rootDescriptorData);
            set = DescriptorProtos.FileDescriptorProto.parseFrom(targetStream);
            return Descriptors.FileDescriptor.buildFrom(set, depSet);
        } catch (IOException | Descriptors.DescriptorValidationException e) {
            throw new RuntimeException("Error : ", e);
        }
    }

    /**.
     * .
     * @return
     */
    public DescriptorProtos.FileDescriptorProto getSet() {

        return set;
    }
}
